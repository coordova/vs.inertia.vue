CREATE TABLE "votes" ("id" integer primary key autoincrement not null, "user_id" integer not null, "combinatoric_id" integer not null, "survey_id" integer not null, "winner_id" integer not null, "loser_id" integer not null, "tie_score" numeric, "voted_at" datetime not null default CURRENT_TIMESTAMP, "ip_address" varchar, "user_agent" text, "is_valid" tinyint(1) not null default '1', "notes" text, "created_at" datetime, "updated_at" datetime, foreign key("user_id") references "users"("id") on delete cascade, foreign key("combinatoric_id") references "combinatorics"("id") on delete cascade, foreign key("survey_id") references "surveys"("id") on delete cascade, foreign key("winner_id") references "characters"("id") on delete cascade, foreign key("loser_id") references "characters"("id") on delete cascade);

